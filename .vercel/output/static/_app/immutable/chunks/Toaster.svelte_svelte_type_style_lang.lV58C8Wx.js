import{l as L,n as N}from"./index.DoRAvCSG.js";import{r as U,B as Q}from"./scheduler.Dxh7RUl2.js";import{d as W,w as j}from"./index.Cqf3cM5M.js";function ne(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ie(e,i){L(e,1,1,()=>{i.delete(e.key)})}function re(e,i,n,r,a,y,d,V,p,b,T,k){let t=e.length,o=y.length,u=t;const c={};for(;u--;)c[e[u].key]=u;const l=[],f=new Map,m=new Map,M=[];for(u=o;u--;){const s=k(a,y,u),h=n(s);let v=d.get(h);v?M.push(()=>v.p(s,i)):(v=b(h,s),v.c()),f.set(h,l[u]=v),h in c&&m.set(h,Math.abs(u-c[h]))}const S=new Set,x=new Set;function P(s){N(s,1),s.m(V,T),d.set(s.key,s),T=s.first,o--}for(;t&&o;){const s=l[o-1],h=e[t-1],v=s.key,A=h.key;s===h?(T=s.first,t--,o--):f.has(A)?!d.has(v)||S.has(v)?P(s):x.has(A)?t--:m.get(v)>m.get(A)?(x.add(v),P(s)):(S.add(A),t--):(p(h,d),t--)}for(;t--;){const s=e[t];f.has(s.key)||p(s,d)}for(;o;)P(l[o-1]);return U(M),l}function q(e,i,n,r){var a,y,d=!1,V=n.length>=2,p=(u,c,l)=>{if(a=c,V&&(y=u),!d){let f=i(u,c,l);if(i.length<2)c(f);else return f}d=!1},b=W(e,p,r),T=!Array.isArray(e);function k(u){var c=n(u,y);T?(d=!0,e.set(c)):c.forEach((l,f)=>{d=!0,e[f].set(l)}),d=!1}var t=!1;function o(u){var c,l,f,m;if(t){m=u(Q(b)),a(m);return}var M=b.subscribe(S=>{t?c?l=!0:c=!0:f=S});m=u(f),t=!0,a(m),M(),t=!1,l&&(m=Q(b)),c&&k(m)}return{subscribe:b.subscribe,set(u){o(()=>u)},update:o}}const z=20,g=j([]),_=j(null),R=new Map,B=e=>{if(R.has(e))return;const i=setTimeout(()=>{R.delete(e),H(e)},1e3);R.set(e,i)},C=e=>{const i=R.get(e);i&&clearTimeout(i)};function F(e){e.id&&C(e.id),g.update(i=>i.map(n=>n.id===e.id?{...n,...e}:n))}function G(e){g.update(i=>[e,...i].slice(0,z))}function J(e){Q(g).find(i=>i.id===e.id)?F(e):G(e)}function K(e){g.update(i=>(e?B(e):i.forEach(n=>{B(n.id)}),i.map(n=>n.id===e||e===void 0?{...n,visible:!1}:n)))}function H(e){g.update(i=>e===void 0?[]:i.filter(n=>n.id!==e))}function ue(e){_.set(e)}function se(e){let i;_.update(n=>(i=e-(n||0),null)),g.update(n=>n.map(r=>({...r,pauseDuration:r.pauseDuration+i})))}const X={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function te(e={}){return{toasts:q(g,n=>n.map(r=>{var a,y;return{...e,...e[r.type],...r,duration:r.duration||((a=e[r.type])==null?void 0:a.duration)||(e==null?void 0:e.duration)||X[r.type],style:[e.style,(y=e[r.type])==null?void 0:y.style,r.style].join(";")}}),n=>n),pausedAt:_}}const Y=e=>typeof e=="function",E=(e,i)=>Y(e)?e(i):e,Z=(()=>{let e=0;return()=>(e+=1,e.toString())})(),ce=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){const i=matchMedia("(prefers-reduced-motion: reduce)");e=!i||i.matches}return e}})(),$=(e,i="blank",n)=>({createdAt:Date.now(),visible:!0,type:i,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Z()}),D=e=>(i,n)=>{const r=$(i,e,n);return J(r),r.id},w=(e,i)=>D("blank")(e,i);w.error=D("error");w.success=D("success");w.loading=D("loading");w.custom=D("custom");w.dismiss=e=>{K(e)};w.remove=e=>H(e);w.promise=(e,i,n)=>{const r=w.loading(i.loading,{...n,...n==null?void 0:n.loading});return e.then(a=>(w.success(E(i.success,a),{id:r,...n,...n==null?void 0:n.success}),a)).catch(a=>{w.error(E(i.error,a),{id:r,...n,...n==null?void 0:n.error})}),e};export{se as a,F as b,re as c,ne as e,ie as o,ce as p,ue as s,w as t,te as u};
